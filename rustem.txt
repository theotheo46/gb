Рустем
4. Допущения и ограничения
 1. Проектирование прикладного ПО выполняется с использованием PlantUML
 2. Средством разработки является IntelliJ IDEA
 3. Нагрузка на систему предполагается от 100 клиентов 5000 заказов в день, с последующим увеличением до 500 операторов на протяжениии 5 лет
 4. В рамки проекта не входит сетевая безопасность, полный аудит действий клиентов
 5. Сокращенный атрибутный состав компонентов, (те первое "примитивние" приближение) по конкретной задаче их можно расширить

9.5 Надежность системы обеспечивается
  1. синхронной репликацией БД по географически-распределенным ЦОДам
  2. Запуском приложений в географически распределенных ЦОДах

9.7 Ремонтопригодность
  1. Для сопровождения проекта дооступна документация в различных архетиктурных разрезах
  2. Микросервисная архетиктура позволяет внедрять изменения с меньшими рисками для бизнеса
  3. Использованием в ключевых узлах решений отечественных вендоров

Доступность обеспечивается:
  1. При увеличении нагрузки на приложение - увеличением выполняемых pod-ов под управлением оркестратора kubernetes
  2. При увеличении нагрузки на БД - увеличением реплицируемых БД

13. Физический вид
 БД - Postgres pro enterprise 14, (PPE-86-LIC на 1 ядро)
  8-16cpu/32-64Gb 64Gb Nvme (по микросервисам virtual)
 Clickhouse v22.11.2.30-stable
  1 сервер  - 48cpu/512GB 4TB nvme (baremetal)
 оркестратор - микросервисов kubernetes 1.25.4 , openshift 4.11
  8-16cpu/32-64Gb (virtual)
 авторизация  - ingress nginx controller 2.4.2
  8-16cpu/32-64Gb (virtual)
 отчетность - prometheus 2.40.5, grafana 9.3.1
  24-48cpu/64-128Gb (baremetal)

13.5 Размер, производительность и масштабирование - DB
Сайзинг БД Postgres
https://www.rbc.ru/technology_and_media/20/04/2021/607ede9d9a79473bcf814a9c
70млн пользователей
1 оператор в 1 час от 5 запросов, 8 часов от 40 запросов
100 операторов в день до 5000 запросов, 1 год - 1,8 млн
Postgres DB
       Number rows    Estimated size       Object
-------------------------             -----------------------      ----------------------------------------------------
        70 млн              35GB      Table "CLIENT"
       3,6 млн             7,2GB      Table "INCIDENT"
       1,8 млн             3,6GB      Table "ORDER"
       3,6 млн             2,4GB      Table "SERVICE"
       30                 30 KB       Table "SERVICEGROUP"
       3,6 млн             7,2GB      Table "SERVICEREQUEST"
       7,2 млн            14,4GB      Table "STATUS"

-------------------------             -----------------------      ----------------------------------------------------
                         69,8GB      Total estimated space
(table/1 scheme) - Xeon gold 24cpu/256GB 256GB raid10 nvme -  50тыс tps
или на каждый микросервис 8-16cpu/32-64Gb 64Gb Nvme
Увеличении нагрузки на БД
Масштабирование по вертикали: увеличением cpu/ram
Масштабирование по горизонтали, увеличении нагрузки на БД - увеличением реплицируемых БД


Сайзинг clickhouse на 5 лет 38% ростом (до 500 операторов) темп роста = ((500/100)встепени(1/5) -1)*100
     Number rows     Estimated size       Object
-------------------------             -----------------------      ----------------------------------------------------
       89млн            45GB      Table "CLIENT"
       37млн            75GB      Table "INCIDENT"
       18млн            36GB      Table "ORDER"
       37млн            25GB      Table "SERVICE"
          30           30 KB      Table "SERVICEGROUP"
       37млн            76GB      Table "SERVICEREQUEST"
       75млн           151GB      Table "STATUS"
-------------------------             -----------------------      ----------------------------------------------------
                        411GB      Total estimated space
1 сервер  - 48cpu/512GB 4TB nvme

6. Представление проекта

    проект - Сервис-деск для Ростелекома
    состав -руководитель Максим Клименко,  команда Дмитрий Козицский, Олег Павлов, Рустэм Галин;
    заказчик - Ростелеком
    описание - разработка архитектуры ПО для сервис деска
    мотивация -  сдача экзамена
    цели - разработать отказаустойчивый масштабируемый проект CRM 100 операторов, до 5000 запросов в день с использованием микросервисной архитектуры, с увеличением нагрузки до 500 операторов и хранением 5 лет
    В процессе реализации проекта планируются приобрести навыки подготовки документов архетиктурного решения и его защиты
    планы на применение результатов - как проект в резюме

