# HELPDesk

Cистема CRM для телекоммуникационной компании.

## Сущности:

### User
- Внешний сервис

### Клиент
Внешний сервис

### Заказ
Внешний сервис

### Услуга
Внешний сервис


### Обращение
- Создается по звонку клиента (возможны и другие каналы уведомления), клиент идентифицирется по его номеру телефона
- Возможны дополнительние каналы получения
  * Telegram, ...
  * ESB
  * SMS gateway
- К обращению привязывается услуга к которой привязана рабочая группа, услуга выбирается из справочника
- По обращению создается заказ (во внешней системе) и инцидент в текущей системе
- Дата и время создания обращения
- Пользователь на которого назначено обращение
- ID клиента от которого пришло обращение
- ID привязанного инцидента

### Инциндент
* Создан на основании обращения
* Дата и время создания инцидента
* ID заказа
* ID услуги

### Менеджер задач
Менеджер задач характеризуется:
- Общий список инцидентов
  - для пользователя видны только инциденты , связанные только с его обращениями
  - для менеджера видны инциденты для всех пользователей из его подразделения
- Витрина с динамическими фильтрами
  - Grafana для UI
  - Prometheus для сбора метрик
  - Clickhouse DB


## Процессы:

### Авторизация
- В процессе авторизации пользователь вводит свой доменный логин и пароль. Происходит проверка наличия такого пользователя через KeyCloak SSO и в случае успеха ему предоставляется доступ
- На уровне KeyCloak есть возможность задания ролей. В рамках данной концепции рассматривается две роли: User и Supervisor
- У пользователя на уровне Keycloak есть такие данные как корпоративный email и ID его менеджера. Существует API который по ID пользователя позволяет достать соответствующий объект.

### Операции со списком клиентов
- Возможность просматривать список клиентов
- Возможность поиска по имени клиента
- Возможность редактировать клиента
- Возможность создавать клиента

### Операции со списком инцидентов
- Возможность просматривать список инцидентов по клиенту
- Возможность просматривать список инцидентов
- Возможность поиска инцидента
- Возможность отвязать инцидент от обращения с переводом обращения в статус CLOSED


### Операции со списком обращений
- Возможность просматривать обращения
- Возможность создавать обращение на клиента
- Возможность закрывать обращение (если по каким то причинам не удалось создать на него инцидент)
- Может предоставить список услуг c возможностью выбора услуги
- 
### Операции с менеджером задач
- Пользователю создается доска
- При создании обращения на доске создается инцидент (под которым сидит заказ)
- У инцидента имеется бизнес-процесс
- По завершению инцидента, он закрывается, автоматически закрывается обращение, нотифицируется (менеджеру, клиенту)
  - Кто закрывает инцидент - пользователь кто его открывал или саппортер на которого он был переведен ?


## Единый язык
- Пользователь
- Клиент
- Менеджер
- Заказ
- Услуга 
- Обращение  (таблица SERVICEREQUEST)
- Инцидент   (таблица INCIDENT)
- Бизнес-процесс - это процесс или сущность ? Описывать его просто в виде narrative или выбирать из справочника?